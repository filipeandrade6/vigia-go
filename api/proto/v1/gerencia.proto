syntax = "proto3";

option go_package = "./internal/api/v1";

package gerencia;

service Gerencia {
    rpc iniciarProcesso (Params) returns (StatusIniciar) {}
    rpc alterarProcesso (Params) returns (StatusAlterar) {}
    rpc pararProcesso (Camera) returns (StatusParar) {}
    rpc removerProcesso (Camera) returns (StatusRemover) {}

    rpc statusArmazenamentoGravacao (ArmazenamentoParams) returns (StatusArmazenamento) {}
}

message Camera {
    // ID no banco de dados
    string id = 1;
}

message Params {
    // Camera a ser processada/modificada
    Camera camera = 1;
    // Processador a ser acoplado na câmera ou que irá substituir

    message Processador {
        // Processador no baco de dados
        string id = 1;
    }

    Processador processador = 2;
}

message StatusArmazenamento {
    message Disco {
        int32 disponivel = 1;
        int32 alocado = 2;
        int32 utilizado = 3;
        string caminho = 4;
    }
    repeated Disco discos = 1;
}

message ArmazenamentoParams {}

message StatusIniciar {}

message StatusAlterar {}

message StatusParar {}

message StatusRemover {}